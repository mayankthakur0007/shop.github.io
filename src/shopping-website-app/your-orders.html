<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/paper-button/paper-button.html"><link rel="import" href="../../bower_components/paper-card/paper-card.html"><link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../../bower_components/paper-toast/paper-toast.html"><link rel="import" href="../../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="import" href="../../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="../../bower_components/paper-input/paper-input.html"><link rel="import" href="../../bower_components/iron-form/iron-form.html"></head><body><dom-module id="my-orders"><template><style>paper-card{width:350px;margin:40px;height:auto;border:1px solid black;}</style><template is="dom-repeat" items="{{orders}}"><paper-card><div class="card-content"><h4>Products Ordered</h4><template is="dom-repeat" items="{{item.items}}" as="product"><hr><h4>Name: {{product.name}}</h4><h4>Quantity: {{product.quantity}}</h4><h4>Price: {{product.price}}</h4></template><hr><h4>Address:<br><br>{{item.houseNumber}},{{item.street}},{{item.city}},{{item.pincode}}</h4><h4>Contact: {{item.phone}}</h4><hr><h4>Total Price: â‚¹{{item.total}}</h4></div><div class="card-actions"><hr><paper-button raised="" on-click="_handleDelete">Cancel Order</paper-button></div></paper-card></template><paper-toast id="cancel" text="Order Cancelled"></paper-toast><iron-ajax id="ajax" on-response="_handleResponse" handle-as="json" content-type="application/json"></iron-ajax></template><script>var MyOrders=/*#__PURE__*/function(_Polymer$Element){babelHelpers.inherits(MyOrders,_Polymer$Element);function MyOrders(){babelHelpers.classCallCheck(this,MyOrders);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(MyOrders).apply(this,arguments))}babelHelpers.createClass(MyOrders,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(MyOrders.prototype),"connectedCallback",this).call(this);this._getData()}/** getdata function for fetching the data from the database and showing it. Ajax request is done in pets
            
            for the data with sell property value "yes" only. This function is also called when any new pet is added 
            
            so that the list got again refreshed **/},{key:"_getData",value:function _getData(){var newEmail=sessionStorage.getItem("email");this._makeAjax("http://localhost:3000/orders?ownerEmail=".concat(newEmail),"get",null)}},{key:"_handleDelete",value:function _handleDelete(event){var id=event.model.item.id;this._makeAjax("http://localhost:3000/orders/".concat(id),"delete",null);this.$.cancel.open();this.action="Delete"}},{key:"_makeAjax",value:function _makeAjax(url,method,postObj){var ajax=this.$.ajax;ajax.method=method;ajax.url=url;ajax.body=postObj?JSON.stringify(postObj):void 0;ajax.generateRequest()}},{key:"_handleResponse",value:function _handleResponse(event){switch(this.action){case"List":this.orders=event.detail.response;break;case"Delete":this.action="List";var newEmail=sessionStorage.getItem("email");this._makeAjax("http://localhost:3000/orders?ownerEmail=".concat(newEmail),"get",null);break;}}}],[{key:"is",get:function get(){return"my-orders"}},{key:"properties",get:function get(){return{action:{type:String,value:"List"},orders:{type:Array,value:[]}}}}]);return MyOrders}(Polymer.Element);window.customElements.define(MyOrders.is,MyOrders);</script></dom-module></body></html>